webpackJsonp([2],{"0JK6":function(e,t){},"7Otq":function(e,t,s){e.exports=s.p+"static/img/logo.9b7e5c5.png"},Cdmo:function(e,t){},MHd8:function(e,t){},NHnr:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s("7+uW"),o=s("mvHQ"),n=s.n(o),r={data:function(){return{homeFlag:-1!==location.hash.indexOf("home"),formFlag:-1!==location.hash.indexOf("form")}},computed:{userInfo:function(){var e=sessionStorage.getItem("userInfo")||"{}";return JSON.parse(e)||{}}},watch:{$route:{handler:function(e){-1!==e.path.indexOf("home")?(this.homeFlag=!0,this.formFlag=!1):-1!==e.path.indexOf("form")&&(this.homeFlag=!1,this.formFlag=!0)}}},mounted:function(){-1===location.hash.indexOf("login")&&-1===location.hash.indexOf("register")&&-1===location.hash.indexOf("customer")&&this.$http.get("/user").then(function(e){var t=e.data||{};if("success"===t.code){var s=t.data||{};sessionStorage.setItem("userInfo",n()(s))}})},methods:{handleCommand:function(e){var t=this;"1"==e?this.$router.push({path:"/form"}):"2"==e?this.$router.push({path:"/home"}):"3"==e&&this.$confirm("是否要退出平台?","温馨提示",{type:"warning"}).then(function(){t.$router.push({path:"/login"})}).catch(function(){return!1})}}},i={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"nav_header"},[a("div",{staticClass:"nav_container"},[a("img",{staticClass:"nav_logo",attrs:{src:s("7Otq"),alt:""}}),e._v(" "),a("div",{staticClass:"nav_title"},[e._v("泰盈集团外围联动客户管理平台")]),e._v(" "),a("div",{staticClass:"logout"},[a("el-dropdown",{attrs:{trigger:"click"},on:{command:e.handleCommand}},[a("div",{staticClass:"logout_icon web_wechat_add el-dropdown-link"}),e._v(" "),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[e.homeFlag?a("el-dropdown-item",{attrs:{command:"1"}},[e._v("进行报备")]):e._e(),e._v(" "),e.formFlag?a("el-dropdown-item",{attrs:{command:"2"}},[e._v("取消报备")]):e._e(),e._v(" "),a("el-dropdown-item",{attrs:{command:"3"}},[e._v("退出")])],1)],1)],1)])])},staticRenderFns:[]};var l={name:"App",data:function(){return{showFlag:!0}},components:{myHeader:s("VU/8")(r,i,!1,function(e){s("0JK6")},null,null).exports},watch:{$route:{handler:function(e){-1!==e.path.indexOf("login")||-1!==location.hash.indexOf("register")||-1!==location.hash.indexOf("customer")?this.showFlag=!1:this.showFlag=!0}}},mounted:function(){-1===location.hash.indexOf("login")&&-1===location.hash.indexOf("register")&&-1===location.hash.indexOf("customer")||(this.showFlag=!1)}},m={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[this.showFlag?t("myHeader"):this._e(),this._v(" "),t("router-view")],1)},staticRenderFns:[]};var c=s("VU/8")(l,m,!1,function(e){s("vIux")},null,null).exports,u=s("/ocq"),p={name:"login",data:function(){return{name:"",pass:""}},mounted:function(){this.$http.post("/logout")},methods:{checkInput:function(){return""===this.name?(this.$message.warning({message:"请输入用户名",center:!0}),!1):""!==this.pass||(this.$message.warning({message:"请输入密码",center:!0}),!1)},handleLogin:function(){var e=this;if(this.checkInput()){var t={username:this.name,pwd:this.pass};this.$http.post("/login",t).then(function(t){var s=t.data||{};"success"===s.code?(document.cookie="uid="+s.data+";path=/;",e.$router.push({path:"/home"}),e.$message.success({message:"登录成功",center:!0})):s.msg?e.$message.error({message:s.msg,center:!0}):e.$message.error({message:"服务器异常，登录失败",center:!0})}).catch(function(t){var s=t.response.data||{};s.msg?e.$message.error({message:s.msg,center:!0}):e.$message.error({message:"服务器异常，登录失败",center:!0})})}}}},h={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-row",{staticClass:"fullscreen"},[a("el-col",{staticClass:"login-box",attrs:{xs:20,sm:10,md:10,lg:8,xl:8}},[a("div",{staticStyle:{"text-align":"center"}},[a("img",{staticClass:"logo",attrs:{src:s("7Otq"),alt:""}})]),e._v(" "),a("p",{staticClass:"text-tips"},[e._v("您好，欢迎登陆")]),e._v(" "),a("form",{staticClass:"login-form",attrs:{action:""}},[a("div",{staticClass:"m-list-group"},[a("div",{staticClass:"m-list-group-item"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.name,expression:"name"}],staticClass:"m-input",attrs:{type:"text",placeholder:"请输入用户名"},domProps:{value:e.name},on:{input:function(t){t.target.composing||(e.name=t.target.value)}}})]),e._v(" "),a("div",{staticClass:"m-list-group-item"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.pass,expression:"pass"}],staticClass:"m-input",attrs:{type:"password",placeholder:"请输入密码"},domProps:{value:e.pass},on:{input:function(t){t.target.composing||(e.pass=t.target.value)}}})])]),e._v(" "),a("button",{staticClass:"m-btn sub select-none",on:{click:function(t){return t.preventDefault(),e.handleLogin(t)}}},[e._v("登陆")]),e._v(" "),a("p",{staticClass:"text-tips"},[e._v("还没有账号？")]),e._v(" "),a("router-link",{attrs:{to:"/register"}},[a("button",{staticClass:"m-btn sub select-none"},[e._v("注册")])]),e._v(" "),a("p",{staticClass:"text-tips"},[e._v("自然来访信息报备")]),e._v(" "),a("router-link",{attrs:{to:"/customer"}},[a("button",{staticClass:"m-btn sub select-none"},[e._v("自然来访")])])],1)])],1)},staticRenderFns:[]};var d=s("VU/8")(p,h,!1,function(e){s("tTGM")},"data-v-349a4632",null).exports,v=function(e,t){/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length)));var s={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds()};for(var a in s)if(new RegExp("("+a+")").test(t)){var o=s[a]+"";t=t.replace(RegExp.$1,1===RegExp.$1.length?o:g(o))}return t};function g(e){return("00"+e).substr(e.length)}var f=function(e){return/[\u4E00-\u9FA5\uF900-\uFA2D]/.test(e)},_={name:"register",data:function(){return{username:"",pwd:"",pwdrepeat:"",name:"",phone:"",role:"",company:"",companyOther:"",companyList:[]}},mounted:function(){var e=this;this.$http.get("/company").then(function(t){if(t){var s=t.data||{};"success"===s.code&&(e.companyList=s.data||[])}})},methods:{checkInput:function(){if(""===this.username||this.username.length<6)return this.$message.warning({message:"请输入不少于6位的用户名",center:!0}),!1;if(""===this.pwd||this.pwd.length<6)return this.$message.warning({message:"请输入不少于6位的密码",center:!0}),!1;if(this.pwd!==this.pwdrepeat)return this.$message.warning({message:"两次输入的密码不一致",center:!0}),!1;var e=!1;return this.name.split("").map(function(t){f(t)||(e=!0)}),""===this.name||e?(this.$message.warning({message:"请输入中文姓名",center:!0}),!1):""===this.phone||11!==this.phone.length?(this.$message.warning({message:"请输入11位电话号码",center:!0}),!1):""===this.role?(this.$message.warning({message:"请选择用户角色",center:!0}),!1):"1"===this.role&&""===this.company?(this.$message.warning({message:"请选择您的代理公司",center:!0}),!1):"1"!==this.role||"other"!==this.company||""!==this.companyOther||(this.$message.warning({message:"请输入代理公司名称",center:!0}),!1)},handleLogin:function(){var e=this;if(this.checkInput()){var t={username:this.username,pwd:this.pwd,name:this.name,phone:this.phone,role:this.role,company:this.company};"other"===this.company&&(t.company=this.companyOther||""),this.$http.post("/register",t).then(function(t){var s=t.data||{};"success"===s.code?(e.$router.push({path:"/login"}),e.$message.success({message:"注册成功",center:!0})):s.msg?e.$message.error({message:s.msg,center:!0}):e.$message.error({message:"服务器异常，注册失败",center:!0})}).catch(function(t){var s=t.response.data||{};s.msg?e.$message.error({message:s.msg,center:!0}):e.$message.error({message:"服务器异常，注册失败",center:!0})})}}}},w={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-row",{staticClass:"fullscreen"},[a("el-col",{staticClass:"register-box",attrs:{xs:20,sm:10,md:10,lg:8,xl:8}},[a("div",{staticStyle:{"text-align":"center"}},[a("img",{staticClass:"logo",attrs:{src:s("7Otq"),alt:""}})]),e._v(" "),a("p",{staticClass:"text-tips"},[e._v("您好，欢迎注册")]),e._v(" "),a("form",{staticClass:"register-form",attrs:{action:""}},[a("div",{staticClass:"m-list-group"},[a("div",{staticClass:"m-list-group-item"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.username,expression:"username"}],staticClass:"m-input",attrs:{type:"text",placeholder:"请输入用户名"},domProps:{value:e.username},on:{input:function(t){t.target.composing||(e.username=t.target.value)}}})]),e._v(" "),a("div",{staticClass:"m-list-group-item"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.pwd,expression:"pwd"}],staticClass:"m-input",attrs:{type:"password",placeholder:"请输入密码"},domProps:{value:e.pwd},on:{input:function(t){t.target.composing||(e.pwd=t.target.value)}}})]),e._v(" "),a("div",{staticClass:"m-list-group-item"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.pwdrepeat,expression:"pwdrepeat"}],staticClass:"m-input",attrs:{type:"password",placeholder:"再次输入密码"},domProps:{value:e.pwdrepeat},on:{input:function(t){t.target.composing||(e.pwdrepeat=t.target.value)}}})]),e._v(" "),a("div",{staticClass:"m-list-group-item"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.name,expression:"name"}],staticClass:"m-input",attrs:{type:"text",placeholder:"您的姓名"},domProps:{value:e.name},on:{input:function(t){t.target.composing||(e.name=t.target.value)}}})]),e._v(" "),a("div",{staticClass:"m-list-group-item"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.phone,expression:"phone"}],staticClass:"m-input",attrs:{type:"text",placeholder:"您的电话号码",maxlength:"11"},domProps:{value:e.phone},on:{input:function(t){t.target.composing||(e.phone=t.target.value)}}})]),e._v(" "),a("div",{staticClass:"m-list-group-item",staticStyle:{"text-align":"left"}},[a("el-select",{attrs:{size:"small",placeholder:"请选择用户角色"},model:{value:e.role,callback:function(t){e.role=t},expression:"role"}},[a("el-option",{attrs:{label:"中介",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"置业顾问",value:"2"}})],1)],1),e._v(" "),"1"===e.role?a("div",{staticClass:"m-list-group-item",staticStyle:{"text-align":"left"}},[a("el-select",{attrs:{size:"small",placeholder:"您所属的代理公司"},model:{value:e.company,callback:function(t){e.company=t},expression:"company"}},[e._l(e.companyList,function(e){return a("el-option",{attrs:{label:e.companyName,value:e.companyId}})}),e._v(" "),a("el-option",{attrs:{label:"其他",value:"other"}})],2)],1):e._e(),e._v(" "),"1"===e.role&&"other"===e.company?a("div",{staticClass:"m-list-group-item"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.companyOther,expression:"companyOther"}],staticClass:"m-input",attrs:{type:"text",placeholder:"您所属的代理公司"},domProps:{value:e.companyOther},on:{input:function(t){t.target.composing||(e.companyOther=t.target.value)}}})]):e._e()]),e._v(" "),a("button",{staticClass:"m-btn sub select-none",on:{click:function(t){return t.preventDefault(),e.handleLogin(t)}}},[e._v("注册")]),e._v(" "),a("p",{staticClass:"text-tips"}),e._v(" "),a("router-link",{attrs:{to:"/login"}},[a("button",{staticClass:"m-btn sub select-none"},[e._v("返回")])])],1)])],1)},staticRenderFns:[]};var b=s("VU/8")(_,w,!1,function(e){s("rsRz")},"data-v-7aeb79db",null).exports,y={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-row",{staticClass:"fullscreen"},[a("el-col",{staticClass:"login-box",attrs:{xs:20,sm:10,md:10,lg:8,xl:8}},[a("div",{staticStyle:{"text-align":"center"}},[a("img",{staticClass:"logo",attrs:{src:s("7Otq"),alt:""}})]),e._v(" "),a("p",{staticClass:"text-tips"},[e._v("自然来访信息报备")]),e._v(" "),a("form",{staticClass:"login-form",attrs:{action:""}},[a("div",{staticClass:"m-list-group"},[a("div",{staticClass:"m-list-group-item"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.name,expression:"name"}],staticClass:"m-input",attrs:{type:"text",placeholder:"您的姓名"},domProps:{value:e.name},on:{input:function(t){t.target.composing||(e.name=t.target.value)}}})]),e._v(" "),a("div",{staticClass:"m-list-group-item"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.phone,expression:"phone"}],staticClass:"m-input",attrs:{type:"text",placeholder:"您的电话号码"},domProps:{value:e.phone},on:{input:function(t){t.target.composing||(e.phone=t.target.value)}}})])]),e._v(" "),a("button",{staticClass:"m-btn sub select-none",on:{click:function(t){return t.preventDefault(),e.handleLogin(t)}}},[e._v("提交")]),e._v(" "),a("p",{staticClass:"text-tips"}),e._v(" "),a("router-link",{attrs:{to:"/login"}},[a("button",{staticClass:"m-btn sub select-none"},[e._v("返回")])])],1)])],1)},staticRenderFns:[]};var x=s("VU/8")({name:"customer",data:function(){return{name:"",phone:""}},methods:{checkInput:function(){return""===this.name?(this.$message.warning({message:"请输入您的姓名",center:!0}),!1):""!==this.phone||(this.$message.warning({message:"请输入您的电话号码",center:!0}),!1)},handleLogin:function(){var e=this;if(this.checkInput()){var t={name:this.name,phone:this.phone};this.$http.post("/customer",t).then(function(t){var s=t.data||{};"success"===s.code?(e.$router.push({path:"/login"}),e.$message.success({message:"报备成功",center:!0})):s.msg?e.$message.error({message:s.msg,center:!0}):e.$message.error({message:"服务器异常，报备失败",center:!0})}).catch(function(t){e.$message.error({message:"服务器异常，报备失败",center:!0})})}}}},y,!1,function(e){s("mrjZ")},"data-v-4efe5a27",null).exports,C={data:function(){return{tableData:[]}},computed:{userInfo:function(){var e=sessionStorage.getItem("userInfo")||"{}";return JSON.parse(e)||{}},tableType:function(){return document.body.clientWidth>=768?"pc":"mb"}},mounted:function(){this.getData()},methods:{getNow:function(){return v(new Date,"yyyy-MM-dd")},getData:function(){var e=this;this.$http.get("/report").then(function(t){var s=t.data||{};if("success"===s.code){var a=s.data||[];a.map(function(t,s){t.indexNum=s+1,t.company=e.userInfo.company||"",t.salesmanName=e.userInfo.name||"",t.salesmanPhone=e.userInfo.phone||""}),e.tableData=a}else s.msg?e.$message.error({message:s.msg,center:!0}):e.$message.error({message:"服务器异常，查询失败",center:!0})}).catch(function(t){var s=t.response.data||{};s.msg?e.$message.error({message:s.msg,center:!0}):e.$message.error({message:"服务器异常，查询失败",center:!0})})},updateReport:function(e){this.$router.push({path:"/form",query:{id:e.reportId}})}}},$={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"home"},[s("div",{staticClass:"home_header"},[s("h2",[e._v("泰盈集团信息登记表")]),e._v(" "),s("span",[e._v(e._s(e.getNow()))])]),e._v(" "),s("div",{staticClass:"home_main"},["mb"===e.tableType?[s("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData}},[s("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left"}},[s("el-form-item",{attrs:{label:"客户姓名"}},[s("span",[e._v(e._s(t.row.customerName))])]),e._v(" "),s("el-form-item",{attrs:{label:"客户电话号码"}},[t.row.customerPhone?[s("span",[e._v(e._s(t.row.customerPhone))])]:t.row.customerPhone3&&t.row.customerPhone4?[s("span",[e._v(e._s(t.row.customerPhone3+"****"+t.row.customerPhone4))])]:e._e()],2),e._v(" "),s("el-form-item",{attrs:{label:"来访人数"}},[s("span",[e._v(e._s(t.row.visitNum))])]),e._v(" "),"0"===e.userInfo.role?s("el-form-item",{attrs:{label:"来访次数"}},[s("span",[e._v(e._s(t.row.visitNum))])]):e._e(),e._v(" "),s("el-form-item",{attrs:{label:"代理公司名称"}},[s("span",[e._v(e._s(t.row.company))])]),e._v(" "),s("el-form-item",{attrs:{label:"业务员姓名"}},[s("span",[e._v(e._s(t.row.salesmanName))])]),e._v(" "),s("el-form-item",{attrs:{label:"业务员电话号码"}},[s("span",[e._v(e._s(t.row.salesmanPhone))])]),e._v(" "),"0"===e.userInfo.role?s("el-form-item",{attrs:{label:"置业顾问"}},[s("span",[e._v(e._s(t.row.prop10))])]):e._e(),e._v(" "),s("el-form-item",{attrs:{label:"预约到访时间"}},[s("span",[e._v(e._s(t.row.visitDate))])]),e._v(" "),s("el-form-item",{attrs:{label:"实际到访时间"}},[s("span",[e._v(e._s(t.row.indexNum2))])]),e._v(" "),s("el-form-item",{attrs:{label:"操作"}},["Y"===t.row.comfirmFlag?[s("a",{attrs:{href:"javascript:;"},on:{click:function(s){e.updateReport(t.row)}}},[e._v("客户来访登记")])]:[s("span",[e._v("暂无操作")])]],2)],1)]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"序号",width:"60",align:"center",prop:"indexNum"}}),e._v(" "),s("el-table-column",{attrs:{label:"报备日期",align:"center",prop:"reportDate"}}),e._v(" "),s("el-table-column",{attrs:{label:"审核状态",align:"center",width:"100",prop:"comfirmFlag"},scopedSlots:e._u([{key:"default",fn:function(t){return["Y"===t.row.comfirmFlag?[e._v("审核通过")]:"N"===t.row.comfirmFlag?[e._v("未审核")]:[e._v("审核未通过")]]}}])})],1)]:[s("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,size:"medium"}},[s("el-table-column",{attrs:{prop:"indexNum",align:"center",width:"60",fixed:"","show-overflow-tooltip":"",label:"序号"}}),e._v(" "),s("el-table-column",{attrs:{prop:"reportDate",align:"center",width:"110",fixed:"","show-overflow-tooltip":"",label:"报备日期"}}),e._v(" "),s("el-table-column",{attrs:{align:"center",width:"100",fixed:"","show-overflow-tooltip":"",label:"审核状态"},scopedSlots:e._u([{key:"default",fn:function(t){return["Y"===t.row.comfirmFlag?[e._v("审核通过")]:"N"===t.row.comfirmFlag?[e._v("未审核")]:[e._v("审核未通过")]]}}])}),e._v(" "),s("el-table-column",{attrs:{prop:"customerName",align:"center","show-overflow-tooltip":"",label:"客户姓名"}}),e._v(" "),s("el-table-column",{attrs:{align:"center",width:"110","show-overflow-tooltip":"",label:"客户电话号码"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.customerPhone?[e._v(e._s(t.row.customerPhone))]:t.row.customerPhone3&&t.row.customerPhone4?[e._v(e._s(t.row.customerPhone3+"****"+t.row.customerPhone4))]:e._e()]}}])}),e._v(" "),s("el-table-column",{attrs:{prop:"visitNum",align:"center",width:"110","show-overflow-tooltip":"",label:"来访人数"}}),e._v(" "),"0"===e.userInfo.role?s("el-table-column",{attrs:{prop:"visitNum",align:"center",width:"110","show-overflow-tooltip":"",label:"来访次数"}}):e._e(),e._v(" "),s("el-table-column",{attrs:{prop:"company",align:"center",width:"200","show-overflow-tooltip":"",label:"代理公司名称"}}),e._v(" "),s("el-table-column",{attrs:{prop:"salesmanName",align:"center",width:"100","show-overflow-tooltip":"",label:"业务员姓名"}}),e._v(" "),s("el-table-column",{attrs:{prop:"salesmanPhone",align:"center",width:"130","show-overflow-tooltip":"",label:"业务员电话号码"}}),e._v(" "),"0"===e.userInfo.role?s("el-table-column",{attrs:{prop:"prop10",align:"center","show-overflow-tooltip":"",label:"置业顾问"}}):e._e(),e._v(" "),s("el-table-column",{attrs:{align:"center",label:"报备到访时间"}},[s("el-table-column",{attrs:{prop:"visitDate",align:"center",width:"160","show-overflow-tooltip":"",label:"预约到访时间"}}),e._v(" "),s("el-table-column",{attrs:{prop:"indexNum2",align:"center",width:"160","show-overflow-tooltip":"",label:"实际到访时间"}})],1),e._v(" "),s("el-table-column",{attrs:{label:"操作",align:"center",width:"120",fiexd:""},scopedSlots:e._u([{key:"default",fn:function(t){return["Y"===t.row.comfirmFlag?[s("a",{attrs:{href:"javascript:;"},on:{click:function(s){e.updateReport(t.row)}}},[e._v("客户来访登记")])]:[s("span",[e._v("暂无操作")])]]}}])})],1)]],2),e._v(" "),s("div",{staticClass:"home_footer"},[s("router-link",{attrs:{to:"/form"}},[s("el-button",{staticClass:"addForm",attrs:{type:"primary",icon:"el-icon-edit",circle:""}})],1)],1)])},staticRenderFns:[]};var N=s("VU/8")(C,$,!1,function(e){s("Cdmo")},null,null).exports,P={data:function(){return{reportId:this.$route.query.id||"",company:"",companyOther:"",customerName:"",sex:"",complateFlag:!0,customerPhone:"",customerPhone3:"",customerPhone4:"",visitNum:"",visitDate:v(new Date,"yyyy-MM-dd hh:mm:00"),actualVisitDate:v(new Date,"yyyy-MM-dd hh:mm:00"),salesmanName:"",salesmanPhone:""}},computed:{userInfo:function(){var e=sessionStorage.getItem("userInfo")||"{}";return JSON.parse(e)||{}}},watch:{complateFlag:{handler:function(e){e?(this.customerPhone3="",this.customerPhone4=""):this.customerPhone=""}}},mounted:function(){var e=this;this.company=this.userInfo.company||"",this.salesmanName=this.userInfo.name||"",this.salesmanPhone=this.userInfo.phone||"",this.reportId&&this.$http.get("/report/"+this.reportId).then(function(t){var s=t.data||{};if("success"===s.code){var a=s.data||{};e.customerName=a.customerName||"",e.sex=a.sex||"",e.customerPhone=a.customerPhone||"",e.visitNum=a.visitNum||"",e.visitDate=a.visitDate||v(new Date,"yyyy-MM-dd hh:mm:00")}else s.msg?e.$message.error({message:s.msg,center:!0}):e.$message.error({message:"服务器异常，查询失败",center:!0})}).catch(function(t){var s=t.response.data||{};s.msg?e.$message.error({message:s.msg,center:!0}):e.$message.error({message:"服务器异常，查询失败",center:!0})})},methods:{getNow:function(){return v(new Date,"yyyy-MM-dd")},clearForm:function(){this.customerName="",this.sex="",this.customerPhone="",this.customerPhone3="",this.customerPhone4="",this.visitNum="",this.visitDate=v(new Date,"yyyy-MM-dd hh:mm:00"),this.actualVisitDate=v(new Date,"yyyy-MM-dd hh:mm:00")},submitForm:function(){var e=this,t=!1;if(this.customerName.split("").map(function(e){f(e)||(t=!0)}),""===this.customerName||t)return this.$message.warning({message:"请输入中文客户姓名",center:!0}),!1;if(""===this.sex)return this.$message.warning({message:"请选择客户性别",center:!0}),!1;if(this.complateFlag&&11!==this.customerPhone.length)return this.$message.warning({message:"请输入11位客户电话号码",center:!0}),!1;if(!this.complateFlag&&(3!==this.customerPhone3.length||4!==this.customerPhone4.length))return this.$message.warning({message:"请输入客户电话号码前3位后4位",center:!0}),!1;if(""===this.visitNum)return this.$message.warning({message:"请输入到访人数",center:!0}),!1;var s={sex:this.sex,customerName:this.customerName,customerPhone:this.customerPhone,visitNum:this.visitNum},a="/report",o="post";this.reportId?(a+="/"+this.reportId,o="put",s.actualVisitDate=this.actualVisitDate):(s.visitDate=this.visitDate,s.customerPhone3=this.customerPhone3,s.customerPhone4=this.customerPhone4),this.$http[o](a,s).then(function(t){var s=t.data||{};"success"===s.code?(e.$router.push({path:"/home"}),e.$message.success({message:"报备成功",center:!0})):s.msg?e.$message.error({message:s.msg,center:!0}):e.$message.error({message:"服务器异常，报备失败",center:!0})}).catch(function(t){var s=t.response.data||{};s.msg?e.$message.error({message:s.msg,center:!0}):e.$message.error({message:"服务器异常，报备失败",center:!0})})}}},F={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"form"},[s("el-row",[s("el-col",{staticClass:"form_header",attrs:{xs:24,sm:24,md:24,lg:24,xl:24}},[s("div",{staticClass:"form_title"},[s("h2",[e._v("泰盈集团报备表单")]),e._v(" "),s("span",[e._v(e._s(e.getNow()))])])]),e._v(" "),s("el-col",{staticClass:"form_main",attrs:{xs:24,sm:10,md:10,lg:8,xl:8}},[s("div",{staticClass:"form_container"},[s("p",[e._v("代理公司："),s("label",{staticClass:"form_point"},[e._v("*")])]),e._v(" "),s("el-input",{attrs:{size:"small",disabled:""},model:{value:e.company,callback:function(t){e.company=t},expression:"company"}})],1),e._v(" "),"other"===e.company?s("div",{staticClass:"form_container"}):e._e(),e._v(" "),s("div",{staticClass:"form_container"},[s("p",[e._v("客户姓名："),s("label",{staticClass:"form_point"},[e._v("*")])]),e._v(" "),s("el-input",{attrs:{size:"small",placeholder:"请输入客户姓名"},model:{value:e.customerName,callback:function(t){e.customerName=t},expression:"customerName"}})],1),e._v(" "),s("div",{staticClass:"form_container"},[s("el-radio",{attrs:{label:"M"},model:{value:e.sex,callback:function(t){e.sex=t},expression:"sex"}},[e._v("先生")]),e._v(" "),s("el-radio",{attrs:{label:"F"},model:{value:e.sex,callback:function(t){e.sex=t},expression:"sex"}},[e._v("小姐")])],1),e._v(" "),s("div",{staticClass:"form_container"},[s("p",[e._v("客户电话："),s("label",{staticClass:"form_point"},[e._v("*")]),e._v(" "),e.complateFlag?s("el-button",{staticClass:"phone_btn",attrs:{type:"primary",size:"mini",disabled:""!==e.reportId},on:{click:function(t){e.complateFlag=!1}}},[e._v("不知道完整号码?")]):e._e(),e._v(" "),e.complateFlag?e._e():s("el-button",{staticClass:"phone_btn",attrs:{type:"primary",size:"mini"},on:{click:function(t){e.complateFlag=!0}}},[e._v("知道完整号码?")])],1),e._v(" "),e.complateFlag?[s("el-input",{attrs:{size:"small",placeholder:"请输入客户电话号码",maxlength:"11"},model:{value:e.customerPhone,callback:function(t){e.customerPhone=t},expression:"customerPhone"}})]:[s("el-input",{staticClass:"phone_container",attrs:{size:"small",placeholder:"前3位",maxlength:"3"},model:{value:e.customerPhone3,callback:function(t){e.customerPhone3=t},expression:"customerPhone3"}}),e._v(" "),s("span",[e._v("****")]),e._v(" "),s("el-input",{staticClass:"phone_container",attrs:{size:"small",placeholder:"后4位",maxlength:"4"},model:{value:e.customerPhone4,callback:function(t){e.customerPhone4=t},expression:"customerPhone4"}})]],2),e._v(" "),s("div",{staticClass:"form_container"},[s("p",[e._v("到访人数："),s("label",{staticClass:"form_point"},[e._v("*")])]),e._v(" "),s("el-input",{attrs:{size:"small",placeholder:"请输入到访人数"},model:{value:e.visitNum,callback:function(t){e.visitNum=t},expression:"visitNum"}})],1),e._v(" "),s("div",{staticClass:"form_container"},[s("p",[e._v("预约到访时间："),s("label",{staticClass:"form_point"},[e._v("*")])]),e._v(" "),s("el-date-picker",{attrs:{type:"datetime",size:"small",format:"yyyy-MM-dd HH:mm:00","value-format":"yyyy-MM-dd HH:mm:00",editable:!1,clearable:!1,placeholder:"请选择预约到访时间"},model:{value:e.visitDate,callback:function(t){e.visitDate=t},expression:"visitDate"}})],1),e._v(" "),e.reportId?s("div",{staticClass:"form_container"},[s("p",[e._v("实际到访时间："),s("label",{staticClass:"form_point"},[e._v("*")])]),e._v(" "),s("el-date-picker",{attrs:{type:"datetime",size:"small",format:"yyyy-MM-dd HH:mm:00","value-format":"yyyy-MM-dd HH:mm:00",editable:!1,clearable:!1,placeholder:"请选择实际到访时间"},model:{value:e.actualVisitDate,callback:function(t){e.actualVisitDate=t},expression:"actualVisitDate"}})],1):e._e(),e._v(" "),s("div",{staticClass:"form_container"},[s("p",[e._v("业务员姓名："),s("label",{staticClass:"form_point"},[e._v("*")])]),e._v(" "),s("el-input",{attrs:{size:"small",disabled:""},model:{value:e.salesmanName,callback:function(t){e.salesmanName=t},expression:"salesmanName"}})],1),e._v(" "),s("div",{staticClass:"form_container"},[s("p",[e._v("业务员联系电话："),s("label",{staticClass:"form_point"},[e._v("*")])]),e._v(" "),s("el-input",{attrs:{size:"small",disabled:""},model:{value:e.salesmanPhone,callback:function(t){e.salesmanPhone=t},expression:"salesmanPhone"}})],1)]),e._v(" "),s("el-col",{staticClass:"form_footer",attrs:{xs:24,sm:24,md:24,lg:24,xl:24}},[s("div",{staticClass:"form_footer_btns"},[s("el-button",{attrs:{type:"primary",size:"medium"},on:{click:e.submitForm}},[e._v("提交")]),e._v(" "),s("el-button",{attrs:{type:"primary",size:"medium"},on:{click:e.clearForm}},[e._v("重置")])],1)])],1),e._v(" "),s("router-link",{attrs:{to:"/home"}},[s("el-button",{staticClass:"addForm",attrs:{type:"warning",icon:"el-icon-delete",circle:""}})],1)],1)},staticRenderFns:[]};var k=s("VU/8")(P,F,!1,function(e){s("MHd8")},null,null).exports;a.default.use(u.a);var D=new u.a({routes:[{path:"/login",name:"login",component:d},{path:"/register",name:"register",component:b},{path:"/customer",name:"customer",component:x},{path:"/home",name:"home",component:N},{path:"/form",name:"form",component:k},{path:"*",redirect:"/login"}]}),I=s("aozt"),M=s.n(I),O=(s("x1Tb"),s("xYCT"));a.default.use(O.Dropdown),a.default.use(O.DropdownMenu),a.default.use(O.DropdownItem),a.default.use(O.Input),a.default.use(O.Radio),a.default.use(O.Checkbox),a.default.use(O.Select),a.default.use(O.Option),a.default.use(O.Button),a.default.use(O.Table),a.default.use(O.TableColumn),a.default.use(O.DatePicker),a.default.use(O.Tooltip),a.default.use(O.Form),a.default.use(O.FormItem),a.default.use(O.Alert),a.default.use(O.Icon),a.default.use(O.Row),a.default.use(O.Col),a.default.use(O.Loading.directive),a.default.prototype.$loading=O.Loading.service,a.default.prototype.$msgbox=O.MessageBox,a.default.prototype.$alert=O.MessageBox.alert,a.default.prototype.$confirm=O.MessageBox.confirm,a.default.prototype.$prompt=O.MessageBox.prompt,a.default.prototype.$message=O.Message,M.a.defaults.withCredentials=!0,a.default.config.productionTip=!1,a.default.prototype.$http=M.a,new a.default({el:"#app",router:D,components:{App:c},template:"<App/>"})},mrjZ:function(e,t){},rsRz:function(e,t){},tTGM:function(e,t){},vIux:function(e,t){},x1Tb:function(e,t){}},["NHnr"]);